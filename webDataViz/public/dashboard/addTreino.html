<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/addTreino.css">
    <link rel="stylesheet" href="../css/nav.css">
    <title>Document</title>
</head>

<body>

    <div class="header">
        <div class="container">
            <div class="logoTitulo">
                <img src="../assets/icon/LogoFocus.svg" width="90vw" alt="">
            </div>

            <nav class="navbar">
                <div class="links">
                    <div>
                        <a href="./addSerie.html">Home</a>
                    </div>
                    <div>
                        <a href="">Ficha</a>
                    </div>
                    <div>
                        <a href="./login1.html">Dashboard</a>
                    </div>
                    <div>
                        <a href="">Historico</a>
                    </div>
                </div>
            </nav>

        </div>
    </div>

    <main>

        <section class="content">

            <section class="lateral">
                <div class="lateralContainer">

                    <div class="card">
                        <div class="headerCard">
                            <p class="cardTitulo">Treino A</p>
                            <p><span>Peito costas e triceps</span></p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="headerCard">
                            <p class="cardTitulo">Treino B</p>
                            <p><span>Peito costas e triceps</span></p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="headerCard">
                            <p class="cardTitulo">Treino C</p>
                            <p><span>Peito costas e triceps</span></p>
                        </div>
                    </div>

                    <div class="card">
                        <div class="headerCard">
                            <p class="cardTitulo">Treino D</p>
                            <p><span>Peito costas e triceps</span></p>
                        </div>
                    </div>

                </div>
            </section>

            <!-- FORMUL√ÅRIO QUE SOME -->
            <div id="secCadastrarTreino">
                <div class="titulo">
                    <p class="secTitulo">Cadastre informa√ß√µes da sua Ficha</p>
                </div>

                <div class="form">

                    <div class="campos">
                        <div class="campo">
                            <label>Titulo</label>
                            <input id="iptTitulo" type="text" placeholder="Foco em ombros">
                        </div>

                        <div class="campo">
                            <label>Data inicio</label>
                            <input id="iptDtInicio" type="date">
                        </div>
                    </div>

                    <div class="campos">
                        <div class="campo">
                            <label>Frequencia Semanal</label>
                            <input id="iptFrequencia" type="text">
                        </div>

                        <div class="campo">
                            <label>Objetivo</label>
                            <form>
                                <p>
                                    <select id="objSelect">
                                        <option value="" selected disabled>Selecione seu objetivo</option>
                                        <option value="forca">üí™üèº For√ßa</option>
                                        <option value="hipertrofia">üèãüèº‚Äç‚ôÇÔ∏è Hipertrofia</option>
                                        <option value="reabilitacao">üöë Reabilita√ß√£o</option>
                                        <option value="Emagrecimento">üèÉüèª Emagrecimento</option>

                                    </select>
                                </p>
                            </form>
                        </div>
                    </div>

                    <div class="observacao">
                        <label>Observa√ß√µes</label>
                        <textarea id="textObservacao"></textarea>
                    </div>

                    <div class="btn">
                        <button onclick="cadastrarFicha()">Cadastrar ficha</button>
                    </div>

                </div>
            </div>

            <!-- ADD TREINO NO MESMO LUGAR E ESCONDIDO -->
            <section id="addTreino" style="display: none;">
                <div class="contentAddTreino">
                    <div class="tituloTreino">
                        <p>Cadastrar treinos</p>
                    </div>
                    <div class="campos camposTreino">
                        <div class="campo campoTreino">
                            <label>Titulo do treino</label>
                            <input id="iptTreinoTitulo" type="text" placeholder="Costas e biecps">

                        </div>


                        <div class="observacao">
                            <label>Observa√ß√µes</label>
                            <textarea id="iptTreino" class="textAreaTreino"></textarea>
                        </div>
                    </div>


                    <div class="btn btnTreino">
                        <button onclick="abrirAddExercicio()">Cadastrar Treino</button>

                    </div>
                </div>
            </section>


            <!-- SECTION PARA ADICIONAR EXERC√çCIO (INICIALMENTE OCULTA) -->
            <section id="addExercicio" style="display: none;">
                <div class="contentAddExercicio">

                    <div class="tituloExercicio">
                        <p>Adicionar Exerc√≠cio</p>
                    </div>

                    <div class="camposExercicio">

                        <div class="campoEx">
                            <label>Nome</label>
                            <input id="iptNomeEx" type="text" placeholder="Supino inclinado">
                        </div>

                        <div class="campoEx">
                            <label>Descri√ß√£o</label>
                            <input id="iptDescEx" type="text" placeholder="Drop-Set / Rest-Pause ...">
                        </div>

                    </div>

                    <div class="camposExercicio">

                        <div class="campoEx">
                            <label>Agrupamento muscular</label>
                            <input id="iptGrupoEx" type="text" placeholder="Peitoral / Costas / B√≠ceps...">
                        </div>

                        <div class="campoEx">
                            <label>Equipamento</label>
                            <input id="iptEquipEx" type="text" placeholder="M√°quina / Halteres / Barra">
                        </div>

                    </div>

                    <div class="btnAddEx">
                        <button class="btnExercicio" onclick="adicionarExercicio()">Adicionar exerc√≠cio</button>
                    </div>




                    <table id="listaExercicios" class="tabelaExercicio" style="width:100%">
                        <tr>
                            <th>Nome</th>
                            <th>Agrupamento Muscular</th>
                            <th>Equipamento</th>


                        </tr>



                    </table>

                    <!-- LISTA DOS EXERC√çCIOS ADICIONADOS -->

                </div>
            </section>


        </section>

    </main>

</body>

<script>
    function cadastrarFicha() {
        var idUsuario = sessionStorage.ID_USUARIO
        var tituloVar = iptTitulo.value
        var dataInicioVar = iptDtInicio.value
        var frequenciaVar = Number(iptFrequencia.value);
        var objetivoVar = objSelect.value;
        const observacaoVar = document.getElementById('textObservacao').value;


        if (
            tituloVar == "" ||
            dataInicioVar == "" ||
            frequenciaVar == "" ||
            objetivoVar == "" ||
            objetivoVar == ""
        ) {
            console.log('Preencha todos os campos')
        }

        fetch("/fichas/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                idUsuario: idUsuario,
                tituloVar: tituloVar,
                dataInicioVar: dataInicioVar,
                frequenciaVar: frequenciaVar,
                objetivoVar: objetivoVar,
                observacaoVar: observacaoVar
            }),

        }).then(resposta => resposta.json())
        .then(ficha => {
            console.log('Ronaldo:', ficha);

            sessionStorage.ID_FICHA = ficha.idFicha;

            document.getElementById("secCadastrarTreino").style.display = 'none';
            document.getElementById("addTreino").style.display = 'flex';

        });
    }









    var vNome = []
    var vDesc = []
    var vAgrupMusc = []
    var vEquipamento = []

    const exercicioObj = []



    // Renomeei a fun√ß√£o para evitar conflito com o elemento
    function abrirAddExercicio() {
        document.getElementById("addTreino").style.display = 'none';
        document.getElementById("addExercicio").style.display = 'flex';
    }

    function adicionarExercicio() {

        // IDs CORRETOS
        var nomeEx = document.getElementById("iptNomeEx").value;
        var descricaoEx = document.getElementById("iptDescEx").value;
        var grupoEx = document.getElementById("iptGrupoEx").value;
        var equipEx = document.getElementById("iptEquipEx").value;




        if (!nomeEx || !grupoEx || !equipEx) {
            alert("Preencha todos os campos!");
            return;
        }

        let lista = document.getElementById("listaExercicios");

        exercicioObj.push({
            agrupamento: grupoEx,
            nomeExercicio: nomeEx,
            equipamento: equipEx,
            descricao: descricaoEx

        });
        let div = document.createElement("div");
        div.className = "itemExercicio";


        listaExercicios.innerHTML += `
                       <tr>
                            <td>${nomeEx}</td>
                            <td>${grupoEx}</td>
                            <td>${equipEx}}</td>
                        </tr> 
        `;




        lista.appendChild(div);

        // Limpar campos
        document.getElementById("iptNomeEx").value = "";
        document.getElementById("iptDescEx").value = "";
        document.getElementById("iptGrupoEx").value = "";
        document.getElementById("iptEquipEx").value = "";
    }

</script>

</html>